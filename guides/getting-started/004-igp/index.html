
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="RARE documentation">
      
      
        <meta name="author" content="Frederic LOUI">
      
      
        <link rel="canonical" href="https://docs.rare.geant.org/guides/getting-started/004-igp/">
      
      
        <link rel="prev" href="../003-unleash/">
      
      
        <link rel="next" href="../005-mpls/">
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Intra domain routing - RARE documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-J5GQXX6N6K"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-J5GQXX6N6K",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-J5GQXX6N6K",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="light-green">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lets-enable-intra-domain-routing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="RARE documentation" class="md-header__button md-logo" aria-label="RARE documentation" data-md-component="logo">
      
  <img src="../../../img/rare-icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RARE documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Intra domain routing
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/frederic-loui/freertr" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    rare-freertr/freertr
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="RARE documentation" class="md-nav__button md-logo" aria-label="RARE documentation" data-md-component="logo">
      
  <img src="../../../img/rare-icon.png" alt="logo">

    </a>
    RARE documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/frederic-loui/freertr" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    rare-freertr/freertr
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/index.md" class="md-nav__link">
        All features in one page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tabbed.md" class="md-nav__link">
        Features category
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/dataplane.md" class="md-nav__link">
        Dataplane
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interoperability.md" class="md-nav__link">
        Interoperability
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          TOFINO P4 switch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          TOFINO P4 switch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-hcl/" class="md-nav__link">
        RARE HCL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/onie-nos-install/" class="md-nav__link">
        RARE NOS install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/interface/" class="md-nav__link">
        Interfaces configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-lcm-cli/" class="md-nav__link">
        Software operation CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-upgrade/" class="md-nav__link">
        RARE NOS update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-exp-upgrade/" class="md-nav__link">
        RARE NOS experimental
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-switch-profile/" class="md-nav__link">
        RARE NOS switch profile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Cookbook
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Cookbook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/basics/" class="md-nav__link">
        Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/vrf/" class="md-nav__link">
        Bridge and VRF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../001-hello-world/" class="md-nav__link">
        Hello freeRtr !
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../002-topology-example/" class="md-nav__link">
        Topology example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../003-unleash/" class="md-nav__link">
        Unleash freeRtr !
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Intra domain routing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Intra domain routing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    1 Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-freertr-network-example" class="md-nav__link">
    2 freeRtr network example
  </a>
  
    <nav class="md-nav" aria-label="2 freeRtr network example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-diagram" class="md-nav__link">
    2.1 Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-nodes-configuration" class="md-nav__link">
    2.2 Nodes configuration
  </a>
  
    <nav class="md-nav" aria-label="2.2 Nodes configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-router-r1" class="md-nav__link">
    2.2.1  router r1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-router-r2" class="md-nav__link">
    2.2.2  router r2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-router-r3" class="md-nav__link">
    2.2.3  router r3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-router-r4" class="md-nav__link">
    2.2.4  router r4
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-verification" class="md-nav__link">
    3 Verification
  </a>
  
    <nav class="md-nav" aria-label="3 Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-launch-all-nodes" class="md-nav__link">
    3.1 Launch all nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-physical-connectivity-check" class="md-nav__link">
    3.2 Physical connectivity check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-ospf-and-ospfv3-verification" class="md-nav__link">
    3.3 OSPF and OSPFv3 verification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-loopback-reachability-verification" class="md-nav__link">
    3.4 Loopback reachability verification
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-conclusion" class="md-nav__link">
    3 Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../005-mpls/" class="md-nav__link">
        MPLS forwarding core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../006-ibgp/" class="md-nav__link">
        iBGP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../007-polka/" class="md-nav__link">
        Polka
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../conduct/" class="md-nav__link">
        Code of conduct
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../contacts/" class="md-nav__link">
        Contacts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    1 Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-freertr-network-example" class="md-nav__link">
    2 freeRtr network example
  </a>
  
    <nav class="md-nav" aria-label="2 freeRtr network example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-diagram" class="md-nav__link">
    2.1 Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-nodes-configuration" class="md-nav__link">
    2.2 Nodes configuration
  </a>
  
    <nav class="md-nav" aria-label="2.2 Nodes configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-router-r1" class="md-nav__link">
    2.2.1  router r1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-router-r2" class="md-nav__link">
    2.2.2  router r2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-router-r3" class="md-nav__link">
    2.2.3  router r3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-router-r4" class="md-nav__link">
    2.2.4  router r4
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-verification" class="md-nav__link">
    3 Verification
  </a>
  
    <nav class="md-nav" aria-label="3 Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-launch-all-nodes" class="md-nav__link">
    3.1 Launch all nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-physical-connectivity-check" class="md-nav__link">
    3.2 Physical connectivity check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-ospf-and-ospfv3-verification" class="md-nav__link">
    3.3 OSPF and OSPFv3 verification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-loopback-reachability-verification" class="md-nav__link">
    3.4 Loopback reachability verification
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-conclusion" class="md-nav__link">
    3 Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="lets-enable-intra-domain-routing"><strong>Let's enable intra domain routing !</strong><a class="headerlink" href="#lets-enable-intra-domain-routing" title="Permanent link">&para;</a></h1>
<h2 id="1-overview">1 Overview<a class="headerlink" href="#1-overview" title="Permanent link">&para;</a></h2>
<p>In <a href="../002-topology-example/">Topology example</a> you learned how to implement a local topology by declaring 4 nodes and interconnect them via UDP socket in the hardware definition file. In this page, we'll start creating a multiservice Service Provider network on top of this topology. This will be a series of articles that step by step will implement each layer needed to implement a Service Provider network. As we  verified that all interconnects were working  now let's enable an IGP !</p>
<h2 id="2-freertr-network-example">2 freeRtr network example<a class="headerlink" href="#2-freertr-network-example" title="Permanent link">&para;</a></h2>
<h3 id="21-diagram">2.1 Diagram<a class="headerlink" href="#21-diagram" title="Permanent link">&para;</a></h3>
<p>The demo implements a square topology:</p>
<ul>
<li>nodes are <code>r1</code>,<code>r2</code>,<code>r3</code>,<code>r4</code></li>
<li>edges are <code>e1[r1-r2]</code>,<code>e2[r2-r4]</code>,<code>e3[r3-r4]</code>,<code>e4[r1-r3]</code> (<code>-</code> means is "connected to")</li>
</ul>
<div class="highlight"><pre><span></span><code>  r1----e1----r2
  |            |
  |            |
  e2          e2
  |            |
  |            |
  r3----e1----r4
</code></pre></div>
<p>We will consider the following assumption:</p>
<ul>
<li>IGP is <code>OSPF</code></li>
<li>IGP is of course bind to one VRF. Here it is VRF <code>v1</code></li>
<li>Process number is 1 for both IPv4 and IPv6 address family</li>
<li>All routers' interconnections <code>eth1</code> and <code>eth2</code> are in backbone <code>area 0</code></li>
<li>All routers' <code>loopback0</code> are advertised into the IGP domain</li>
<li>All routers' <code>router-id</code> matches <code>loopback0</code> IPv4 address</li>
</ul>
<h3 id="22-nodes-configuration">2.2 Nodes configuration<a class="headerlink" href="#22-nodes-configuration" title="Permanent link">&para;</a></h3>
<h4 id="221-router-r1">2.2.1  <strong>router</strong> <code>r1</code><a class="headerlink" href="#221-router-r1" title="Permanent link">&para;</a></h4>
<p><code>r1-hw.txt</code>
<div class="highlight"><pre><span></span><code>hwid MyDebianVM
tcp2vrf 2321 v1 23
int eth1 eth 0000.1111.0001 127.0.0.1 1001 127.0.0.1 2001
int eth2 eth 0000.1111.0002 127.0.0.1 1002 127.0.0.1 3002
int eth3 eth 0000.1111.0003 127.0.0.1 1003 127.0.0.1 5003
</code></pre></div></p>
<p><code>r1-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>r1#show config-differences
router ospf4 1
 vrf v1
 router-id 2.2.2.1
 traffeng-id 0.0.0.0
 area 0 enable
 exit
router ospf6 1
 vrf v1
 router-id 2.2.2.1
 traffeng-id ::
 area 0 enable
 exit
 interface ethernet1
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface ethernet2
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface loopback0
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf4 1 passive
 router ospf6 1 enable
 router ospf6 1 area 0
 router ospf6 1 passive
 exit
</code></pre></div>
<h4 id="222-router-r2">2.2.2  <strong>router</strong> <code>r2</code><a class="headerlink" href="#222-router-r2" title="Permanent link">&para;</a></h4>
<p><code>r2-hw.txt</code>
<div class="highlight"><pre><span></span><code>hwid MyDebianVM
tcp2vrf 2322 v1 23
int eth1 eth 0000.2222.0001 127.0.0.1 2001 127.0.0.1 1001
int eth2 eth 0000.2222.0002 127.0.0.1 2002 127.0.0.1 4002
</code></pre></div></p>
<p><code>r2-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>r2#show config-differences                                                                                 router ospf4 1
 vrf v1
 router-id 2.2.2.2
 traffeng-id 0.0.0.0
 area 0 enable
 exit
router ospf6 1
 vrf v1
 router-id 2.2.2.2
 traffeng-id ::
 area 0 enable
 exit
interface ethernet1
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface ethernet2
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface loopback0
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf4 1 passive
 router ospf6 1 enable
 router ospf6 1 area 0
 router ospf6 1 passive
 exit
</code></pre></div>
<h4 id="223-router-r3">2.2.3  <strong>router</strong> <code>r3</code><a class="headerlink" href="#223-router-r3" title="Permanent link">&para;</a></h4>
<p><code>r3-hw.txt</code>
<div class="highlight"><pre><span></span><code>hwid MyDebianVM
tcp2vrf 2323 v1 23
int eth1 eth 0000.3333.0001 127.0.0.1 3001 127.0.0.1 4001
int eth2 eth 0000.3333.0002 127.0.0.1 3002 127.0.0.1 1002
</code></pre></div></p>
<p><code>r3-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>r3#show config-differences
router ospf4 1
 vrf v1
 router-id 2.2.2.3
 traffeng-id 0.0.0.0
 area 0 enable
 exit
router ospf6 1
 vrf v1
 router-id 2.2.2.3
 traffeng-id ::
 area 0 enable
 exit
interface ethernet1
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface ethernet2
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface loopback0
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf4 1 passive
 router ospf6 1 enable
 router ospf6 1 area 0
 router ospf6 1 passive
 exit
</code></pre></div>
<h4 id="224-router-r4">2.2.4  <strong>router</strong> <code>r4</code><a class="headerlink" href="#224-router-r4" title="Permanent link">&para;</a></h4>
<p><code>r4-hw.txt</code>
<div class="highlight"><pre><span></span><code>hwid MyDebianVM
tcp2vrf 2324 v1 23
int eth1 eth 0000.4444.0001 127.0.0.1 4001 127.0.0.1 3001
int eth2 eth 0000.4444.0002 127.0.0.1 4002 127.0.0.1 2002
</code></pre></div>
<code>r4-sw.txt</code>
<div class="highlight"><pre><span></span><code>r4#show config-differences
router ospf4 1
 vrf v1
 router-id 2.2.2.4
 traffeng-id 0.0.0.0
 area 0 enable
 exit
router ospf6 1
 vrf v1
 router-id 2.2.2.4
 traffeng-id ::
 area 0 enable
 exit
interface ethernet1
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface ethernet2
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf6 1 enable
 router ospf6 1 area 0
 exit
interface loopback0
 router ospf4 1 enable
 router ospf4 1 area 0
 router ospf4 1 passive
 router ospf6 1 enable
 router ospf6 1 area 0
 router ospf6 1 passive
 exit
</code></pre></div></p>
<h2 id="3-verification">3 Verification<a class="headerlink" href="#3-verification" title="Permanent link">&para;</a></h2>
<h3 id="31-launch-all-nodes">3.1 Launch all nodes<a class="headerlink" href="#31-launch-all-nodes" title="Permanent link">&para;</a></h3>
<p>Run <code>r1</code>,<code>r2</code>,<code>r3</code>,<code>r4</code> in different terminal windows:</p>
<p><code>r1</code>
<div class="highlight"><pre><span></span><code>java -jar rtr.jar routersc r1-hw.txt r1-sw.txt
</code></pre></div>
<code>r2</code>
<div class="highlight"><pre><span></span><code>java -jar rtr.jar routersc r2-hw.txt r2-sw.txt
</code></pre></div>
<code>r3</code>
<div class="highlight"><pre><span></span><code>java -jar rtr.jar routersc r3-hw.txt r3-sw.txt
</code></pre></div>
<code>r4</code>
<div class="highlight"><pre><span></span><code>java -jar rtr.jar routersc r4-hw.txt r4-sw.txt
</code></pre></div></p>
<h3 id="32-physical-connectivity-check">3.2 Physical connectivity check<a class="headerlink" href="#32-physical-connectivity-check" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>LLDP</strong>
<div class="highlight"><pre><span></span><code>r1#sh lldp nei
interface  hostname  iface      ipv4     ipv6
ethernet1  r2        ethernet1  1.1.1.2  1234:1::2
ethernet2  r3        ethernet2  1.1.1.6  1234:2::2
</code></pre></div></li>
<li><strong>interconnectivity reachability</strong></li>
</ul>
<p>ping from <code>r1@eth1</code></p>
<div class="highlight"><pre><span></span><code>r1#ping 1.1.1.2 vrf v1
pinging 1.1.1.2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=1/2/5/12
</code></pre></div>
<p><div class="highlight"><pre><span></span><code>r1#ping 1234:1::2 vrf v1
pinging 1234:1::2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/3/16
</code></pre></div>
ping from <code>r1@eth2</code></p>
<div class="highlight"><pre><span></span><code>r1#ping 1.1.1.6 vrf v1
pinging 1.1.1.6, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/1/2/10
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#ping 1234:2::2 vrf v1
pinging 1234:2::2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/1/4/16
r1#
</code></pre></div>
<h3 id="33-ospf-and-ospfv3-verification">3.3 OSPF and OSPFv3 verification<a class="headerlink" href="#33-ospf-and-ospfv3-verification" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>OSPF interfaces</strong></li>
</ul>
<div class="highlight"><pre><span></span><code>r1#show ipv4 ospf 1 int
interface  neighbors
loopback0  0
ethernet1  1
ethernet2  1
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#show ipv6 ospf 1 int
interface  neighbors
loopback0  0
ethernet1  1
ethernet2  1
</code></pre></div>
<ul>
<li><strong>OSPF neighbors</strong></li>
</ul>
<div class="highlight"><pre><span></span><code>r1#show ipv4 ospf 1 nei
interface  area  address  routerid  state  uptime
ethernet1  0     1.1.1.2  2.2.2.2   4      01:24:16
ethernet2  0     1.1.1.6  2.2.2.3   4      01:20:51
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#show ipv6 ospf 1 nei
interface  area  address    routerid  state  uptime
ethernet1  0     1234:1::2  2.2.2.2   4      01:28:10
ethernet2  0     1234:2::2  2.2.2.3   4      01:25:18
</code></pre></div>
<ul>
<li><strong>OSPF database</strong></li>
</ul>
<div class="highlight"><pre><span></span><code>r1#show ipv4 ospf 1 database 0
routerid  lsaid    sequence  type    len  time
2.2.2.1   2.2.2.1  80000008  router  64   00:19:30
2.2.2.2   2.2.2.2  80000006  router  64   00:18:30
2.2.2.3   2.2.2.3  80000008  router  64   00:18:30
2.2.2.4   2.2.2.4  80000008  router  64   00:18:00
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#show ipv6 ospf 1 database 0
routerid  lsaid      sequence  type    len  time
2.2.2.3   399294760  80000003  link    24   00:20:27
2.2.2.3   399294761  80000003  link    24   00:24:27
2.2.2.3   399294762  80000003  link    24   00:24:27
2.2.2.4   526130513  80000003  link    24   00:19:57
2.2.2.4   526130514  80000003  link    24   00:22:57
2.2.2.4   526130515  80000003  link    24   00:22:57
2.2.2.2   794955991  80000003  link    24   00:20:27
2.2.2.2   794955992  80000003  link    24   00:26:27
2.2.2.2   794955993  80000003  link    24   00:26:27
2.2.2.1   913665481  80000003  link    24   00:21:27
2.2.2.1   913665482  80000004  link    24   00:00:27
2.2.2.1   913665483  80000003  link    24   00:30:57
2.2.2.1   0          80000005  router  36   00:24:27
2.2.2.2   0          80000005  router  36   00:22:27
2.2.2.3   0          80000005  router  36   00:22:27
2.2.2.4   0          80000005  router  36   00:22:27
2.2.2.3   399294760  80000003  prefix  32   00:20:27
2.2.2.3   399294761  80000003  prefix  20   00:24:27
2.2.2.3   399294762  80000003  prefix  20   00:24:27
2.2.2.4   526130513  80000003  prefix  32   00:19:57
2.2.2.4   526130514  80000003  prefix  20   00:22:57
2.2.2.4   526130515  80000003  prefix  20   00:22:57
2.2.2.2   794955991  80000003  prefix  32   00:20:27
2.2.2.2   794955992  80000003  prefix  20   00:26:27
2.2.2.2   794955993  80000003  prefix  20   00:26:27
2.2.2.1   913665481  80000003  prefix  32   00:21:27
2.2.2.1   913665482  80000004  prefix  20   00:00:27
2.2.2.1   913665483  80000003  prefix  20   00:30:57
</code></pre></div>
<ul>
<li><strong>show ipv4 route v1</strong></li>
</ul>
<div class="highlight"><pre><span></span><code>r1#show ipv4 route v1
typ  prefix       metric  iface      hop      time
C    0.0.0.0/32   0/0     ethernet3  null     01:58:12
C    1.1.1.0/30   0/0     ethernet1  null     01:58:13
LOC  1.1.1.1/32   0/1     ethernet1  null     01:58:13
C    1.1.1.4/30   0/0     ethernet2  null     01:58:13
LOC  1.1.1.5/32   0/1     ethernet2  null     01:58:13
O    1.1.1.8/30   110/1   ethernet1  1.1.1.2  01:46:07
O    1.1.1.12/30  110/1   ethernet2  1.1.1.6  01:44:26
C    2.2.2.1/32   0/0     loopback0  null     01:58:13
O    2.2.2.2/32   110/1   ethernet1  1.1.1.2  01:40:28
O    2.2.2.3/32   110/1   ethernet2  1.1.1.6  01:40:15
O    2.2.2.4/32   110/2   ethernet1  1.1.1.2  01:40:06
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#show ipv6 route v1
typ  prefix                     metric  iface      hop        time
C    1234:1::/32                0/0     ethernet1  null       01:58:24
LOC  1234:1::1/128              0/1     ethernet1  null       01:58:24
C    1234:2::/32                0/0     ethernet2  null       01:58:24
LOC  1234:2::1/128              0/1     ethernet2  null       01:58:24
O    1234:3::/32                110/1   ethernet1  1234:1::2  01:46:12
O    1234:4::/32                110/1   ethernet2  1234:2::2  01:44:37
C    4321::1/128                0/0     loopback0  null       01:58:24
O    4321::2/128                110/1   ethernet1  1234:1::2  01:40:40
O    4321::3/128                110/1   ethernet2  1234:2::2  01:40:26
O    4321::4/128                110/2   ethernet1  1234:1::2  01:40:17
C    fe80::/64                  0/0     ethernet3  null       01:58:24
LOC  fe80::200:11ff:fe11:3/128  0/1     ethernet3  null       01:58:24
</code></pre></div>
<h3 id="34-loopback-reachability-verification">3.4 Loopback reachability verification<a class="headerlink" href="#34-loopback-reachability-verification" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>loopback reachability from <code>r1@eth1</code></strong></li>
</ul>
<p>ping to <code>r1@lo0</code></p>
<div class="highlight"><pre><span></span><code>r1#ping 2.2.2.1 vrf v1
pinging 2.2.2.1, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/2/8
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#ping 4321::1 vrf v1
pinging 4321::1, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/0/0
</code></pre></div>
<p>ping to <code>r2@lo0</code></p>
<div class="highlight"><pre><span></span><code>r1#ping 2.2.2.2 vrf v1
pinging 2.2.2.2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/1/4
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#ping 4321::2 vrf v1
pinging 4321::2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/1/5/7
</code></pre></div>
<p>ping to <code>r3@lo0</code></p>
<div class="highlight"><pre><span></span><code>r1#ping 2.2.2.3 vrf v1
pinging 2.2.2.3, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/1/3
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#ping 4321::3 vrf v1
pinging 4321::3, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/1/4
</code></pre></div>
<p>ping to <code>r4@lo0</code></p>
<div class="highlight"><pre><span></span><code>r1#ping 2.2.2.4 vrf v1
pinging 2.2.2.4, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/1/4
</code></pre></div>
<div class="highlight"><pre><span></span><code>r1#ping 4321::4 vrf v1
pinging 4321::4, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/total=0/0/1/9
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>r2</code>,<code>r3</code> and <code>r4</code> verification is not displayed in order to avoid to clutter the article. But verification steps are obviously following the same path.</p>
</div>
<h2 id="3-conclusion">3 Conclusion<a class="headerlink" href="#3-conclusion" title="Permanent link">&para;</a></h2>
<p>This section demonstrated:</p>
<ul>
<li>How to implement IGP in our local square topology:<ul>
<li>by configuring OSPF for IPv4 and IPv6 address family</li>
<li>by explaining how to verify OSPF operation</li>
</ul>
</li>
<li>How to verify connectivity<ul>
<li>from each node of the topology</li>
<li>verify loopback reachability routed by OSPF</li>
</ul>
</li>
</ul>
<p>Deploying an IGP in the entire network domain is the first step to achieve when implementing a multiservice provider network. It is not a coincidence if we advertise the loopback into the IGP. Loopbacks will be identified as iBGP nexthop within in IGP domain. But we will discuss this point in a subsequent article.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The next step will be to implement MPLS so that each loopback can have reachability via MPLS LSP (Label Switch Path). This will be the core of the multiservice service provider backbone.</p>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
 Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
    
    <div class="md-copyright__highlight">
        <img src="/img/geant_logo_white.png"> <img src="/img/eu_logo.png"/><br> <a href="#__consent">Change cookie settings</a>

    </div>
    
    
    Made with
    <span class="twemoji heart">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 20.408c-.492.308-.903.546-1.192.709-.153.086-.308.17-.463.252h-.002a.75.75 0 0 1-.686 0 16.709 16.709 0 0 1-.465-.252 31.147 31.147 0 0 1-4.803-3.34C3.8 15.572 1 12.331 1 8.513 1 5.052 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262A31.146 31.146 0 0 1 14 20.408Z"/></svg>
    </span> by
    <a href="https://github.com/orgs/rare-freertr/people" target="_blank" rel="noopener">
        RARE contributors</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a>
    
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie Consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>