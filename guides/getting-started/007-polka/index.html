
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="RARE documentation">
      
      
        <meta name="author" content="Frederic LOUI">
      
      
        <link rel="canonical" href="https://docs.rare.geant.org/guides/getting-started/007-polka/">
      
      
        <link rel="prev" href="../006-ibgp/">
      
      
        <link rel="next" href="../../../conduct/">
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.17">
    
    
      
        <title>Polka - RARE documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-J5GQXX6N6K"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-J5GQXX6N6K",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-J5GQXX6N6K",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="light-green">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lets-enable-polka" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="RARE documentation" class="md-header__button md-logo" aria-label="RARE documentation" data-md-component="logo">
      
  <img src="../../../img/rare-icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RARE documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Polka
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/frederic-loui/freertr" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    rare-freertr/freertr
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="RARE documentation" class="md-nav__button md-logo" aria-label="RARE documentation" data-md-component="logo">
      
  <img src="../../../img/rare-icon.png" alt="logo">

    </a>
    RARE documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/frederic-loui/freertr" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    rare-freertr/freertr
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        All features in one page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tabbed/" class="md-nav__link">
        Features category
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/dataplane/" class="md-nav__link">
        Dataplane
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interoperability/" class="md-nav__link">
        Interoperability
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          TOFINO P4 switch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          TOFINO P4 switch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-hcl/" class="md-nav__link">
        RARE HCL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/onie-nos-install/" class="md-nav__link">
        RARE NOS install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/interface/" class="md-nav__link">
        Interfaces configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-lcm-cli/" class="md-nav__link">
        Software operation CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-upgrade/" class="md-nav__link">
        RARE NOS update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-exp-upgrade/" class="md-nav__link">
        RARE NOS experimental
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/wedge100bf32/rare-nos-switch-profile/" class="md-nav__link">
        RARE NOS switch profile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Cookbook
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Cookbook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/basics/" class="md-nav__link">
        Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/vrf/" class="md-nav__link">
        Bridge and VRF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../001-hello-world/" class="md-nav__link">
        Hello freeRtr !
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../002-topology-example/" class="md-nav__link">
        Topology example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../003-unleash/" class="md-nav__link">
        Unleash freeRtr !
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../004-igp/" class="md-nav__link">
        Intra domain routing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../005-mpls/" class="md-nav__link">
        MPLS forwarding core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../006-ibgp/" class="md-nav__link">
        iBGP
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Polka
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Polka
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    1 Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-freertr-network-example" class="md-nav__link">
    2 freeRtr network example
  </a>
  
    <nav class="md-nav" aria-label="2 freeRtr network example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-diagram" class="md-nav__link">
    2.1 Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#21-diagram_1" class="md-nav__link">
    2.1 Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-core-nodes-configuration" class="md-nav__link">
    2.2 Core Nodes configuration
  </a>
  
    <nav class="md-nav" aria-label="2.2 Core Nodes configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-routers-r1-r2-r3-r4" class="md-nav__link">
    2.2.1  routers r1, r2, r3, r4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#221-edge-nodes-routers-r5-r6" class="md-nav__link">
    2.2.1  Edge-Nodes-Routers r5, r6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-verification" class="md-nav__link">
    3 Verification
  </a>
  
    <nav class="md-nav" aria-label="3 Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-launch-all-nodes" class="md-nav__link">
    3.1 Launch all nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or" class="md-nav__link">
    Or
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-access-by-telnet" class="md-nav__link">
    3.2 Access by Telnet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-verifying-the-tunnel-is-working-on-router-r5" class="md-nav__link">
    3.3 Verifying the tunnel is working on router r5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-testing-connectivity-between-r5-to-r6-using-polka" class="md-nav__link">
    3.3 Testing connectivity between R5 to R6 using PolKA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-visualizing-route-table" class="md-nav__link">
    3.4 Visualizing route table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-visualizing-polka-routeid" class="md-nav__link">
    3.4 Visualizing PolKA routeid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-tested-on" class="md-nav__link">
    3.5 Tested on
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-conclusion" class="md-nav__link">
    4 Conclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-references" class="md-nav__link">
    5 References:
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../conduct/" class="md-nav__link">
        Code of conduct
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../contacts/" class="md-nav__link">
        Contacts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    1 Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-freertr-network-example" class="md-nav__link">
    2 freeRtr network example
  </a>
  
    <nav class="md-nav" aria-label="2 freeRtr network example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-diagram" class="md-nav__link">
    2.1 Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#21-diagram_1" class="md-nav__link">
    2.1 Diagram
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-core-nodes-configuration" class="md-nav__link">
    2.2 Core Nodes configuration
  </a>
  
    <nav class="md-nav" aria-label="2.2 Core Nodes configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-routers-r1-r2-r3-r4" class="md-nav__link">
    2.2.1  routers r1, r2, r3, r4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#221-edge-nodes-routers-r5-r6" class="md-nav__link">
    2.2.1  Edge-Nodes-Routers r5, r6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-verification" class="md-nav__link">
    3 Verification
  </a>
  
    <nav class="md-nav" aria-label="3 Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-launch-all-nodes" class="md-nav__link">
    3.1 Launch all nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or" class="md-nav__link">
    Or
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-access-by-telnet" class="md-nav__link">
    3.2 Access by Telnet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-verifying-the-tunnel-is-working-on-router-r5" class="md-nav__link">
    3.3 Verifying the tunnel is working on router r5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-testing-connectivity-between-r5-to-r6-using-polka" class="md-nav__link">
    3.3 Testing connectivity between R5 to R6 using PolKA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-visualizing-route-table" class="md-nav__link">
    3.4 Visualizing route table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-visualizing-polka-routeid" class="md-nav__link">
    3.4 Visualizing PolKA routeid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-tested-on" class="md-nav__link">
    3.5 Tested on
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-conclusion" class="md-nav__link">
    4 Conclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-references" class="md-nav__link">
    5 References:
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="lets-enable-polka"><strong>Letâ€™s enable PolKA</strong><a class="headerlink" href="#lets-enable-polka" title="Permanent link">&para;</a></h1>
<h2 id="1-overview">1 Overview<a class="headerlink" href="#1-overview" title="Permanent link">&para;</a></h2>
<p>Source routing (SR) is a prominent alternative to table-based routing for reducing the number of network states. In this approach, a source adds a route label in the packet header to provide deterministic paths for traffic engineering. The residue number system (RNS) is a promising way of executing fully stateless SR, in which forwarding decisions rely on a simple modulo operation over a route label. In this context, PolKA (Polynomial Key-based Architecture), explores binary polynomial arithmetic to propose a novel RNS-based SR. Herein, this tutorial shows how to enable PolKA in FreeRouter, create tunnels and migrate between different tunnels.</p>
<h2 id="2-freertr-network-example">2 freeRtr network example<a class="headerlink" href="#2-freertr-network-example" title="Permanent link">&para;</a></h2>
<h3 id="21-diagram">2.1 Diagram<a class="headerlink" href="#21-diagram" title="Permanent link">&para;</a></h3>
<p>The demo implements a square topology:
- core nodes are <code>r1</code>, <code>r2</code>, <code>r3</code>, <code>r4</code>
- edge nodes are <code>r5</code>, <code>r6</code>
<div class="highlight"><pre><span></span><code>r5----e3----r1----e1----r4
            |            |
            |            |
            e2          e2
            |            |
            |            |
r6----e3----r2----e1----r3
</code></pre></div>
This topology presents two paths between r5 and r6, which will be used to create PolKA tunnels:
- A shortest path: <code>r1</code>- <code>r2</code>
- A longest path: <code>r1</code>- <code>r2</code>-<code>r3</code>-<code>r4</code></p>
<h3 id="21-diagram_1">2.1 Diagram<a class="headerlink" href="#21-diagram_1" title="Permanent link">&para;</a></h3>
<h3 id="22-core-nodes-configuration">2.2 Core Nodes configuration<a class="headerlink" href="#22-core-nodes-configuration" title="Permanent link">&para;</a></h3>
<h4 id="221-routers-r1-r2-r3-r4">2.2.1  <strong>routers</strong> <code>r1</code>, <code>r2</code>, <code>r3</code>, <code>r4</code><a class="headerlink" href="#221-routers-r1-r2-r3-r4" title="Permanent link">&para;</a></h4>
<p><code>r1-hw.txt</code></p>
<div class="highlight"><pre><span></span><code>int eth1 eth 0000.1111.0001 127.0.0.1 16011 127.0.0.1 16021
int eth2 eth 0000.1111.0003 127.0.0.1 16013 127.0.0.1 16023
int eth3 eth 0000.1111.0005 127.0.0.1 16015 127.0.0.1 16025
tcp2vrf 2121 v1 23
</code></pre></div>
<p><code>r1-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>hostname R1
!
vrf definition v1
 rd 1:1
 exit
!
router lsrp4 1
 vrf v1
 router-id 10.1.1.1
 segrout 20 1
 redistribute connected
 exit
!
router lsrp6 1
 vrf v1
 router-id 10.6.1.1
 segrout 20 1
 redistribute connected
 exit
!
interface template1
 no description
 lldp enable
 vrf forwarding v1
 ipv4 address dynamic dynamic
 polka enable 1 65536 20
 mpls enable
 router lsrp4 1 enable
 shutdown
 no log-link-change
 exit
!
interface loopback0
 description lo R1
 vrf forwarding v1
 ipv4 address 20.20.20.1 255.255.255.255
 ipv6 address 2020::1 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet1
 description R1@eth1 --&gt; R4@eth1
 vrf forwarding v1
 ipv4 address 1.1.1.1 255.255.255.252
 ipv6 address 1111:1::1 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet2
 description R1@eth2 --&gt; R2@eth3
 vrf forwarding v1
 ipv4 address 2.2.2.2 255.255.255.252
 ipv6 address 2222::2 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet3
 description R1@eth3 --&gt; R5@eth1
 vrf forwarding v1
 ipv4 address 11.11.11.2 255.255.255.252
 ipv6 address 1111::2 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
server telnet tel
 security protocol telnet
 exec timeout 10000000
 exec logging
 exec colorize prompt
 no exec authorization
 no login authentication
 login logging
 vrf v1
 exit
!
end
</code></pre></div>
<p><code>r2-hw.txt</code></p>
<div class="highlight"><pre><span></span><code>int eth1 eth 0000.2222.0001 127.0.0.1 26011 127.0.0.1 26021
int eth2 eth 0000.2222.0002 127.0.0.1 26012 127.0.0.1 26022
int eth3 eth 0000.2222.0003 127.0.0.1 16023 127.0.0.1 16013
tcp2vrf 2222 v1 23
</code></pre></div>
<p><code>r2-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>hostname R2
!
!
vrf definition v1
 rd 1:1
 exit
!
router lsrp4 1
 vrf v1
 router-id 10.2.2.2
 segrout 20 2
 redistribute connected
 exit
!
router lsrp6 1
 vrf v1
 router-id 10.6.2.2
 segrout 20 2
 redistribute connected
 exit
!
interface template1
 no description
 lldp enable
 vrf forwarding v1
 ipv4 address dynamic dynamic
 polka enable 2 65536 20
 mpls enable
 router lsrp4 1 enable
 shutdown
 no log-link-change
 exit
!
interface loopback0
 description lo R2
 vrf forwarding v1
 ipv4 address 20.20.20.2 255.255.255.255
 ipv6 address 2020::2 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet1
 description R2@eth1 --&gt; R6@eth1
 vrf forwarding v1
 ipv4 address 7.7.7.2 255.255.255.252
 ipv6 address 7777::2 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet2
 description R2@eth2 --&gt; R3eth1
 vrf forwarding v1
 ipv4 address 6.6.6.1 255.255.255.252
 ipv6 address 6666::1 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet3
 description R2@eth3 --&gt; R1@eth2
 vrf forwarding v1
 ipv4 address 2.2.2.1 255.255.255.252
 ipv6 address 2222::1 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
server telnet tel
 security protocol telnet
 exec timeout 10000000
 exec logging
 exec colorize prompt
 no exec authorization
 no login authentication
 login logging
 vrf v1
 exit
!
end
</code></pre></div>
<p><code>r3-hw.txt</code></p>
<div class="highlight"><pre><span></span><code>int eth1 eth 0000.3333.0002 127.0.0.1 26022 127.0.0.1 26012
int eth2 eth 0000.3333.0003 127.0.0.1 46023 127.0.0.1 46013
tcp2vrf 2323 v1 23
</code></pre></div>
<p><code>r3-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>hostname R3
!
vrf definition v1
 rd 1:1
 exit
!
router lsrp4 1
 vrf v1
 router-id 10.3.3.3
 segrout 20 3
 redistribute connected
 exit
!
router lsrp6 1
 vrf v1
 router-id 10.6.3.3
 segrout 20 3
 redistribute connected
 exit
!
interface template1
 no description
 lldp enable
 vrf forwarding v1
 ipv4 address dynamic dynamic
 polka enable 3 65536 20
 mpls enable
 router lsrp4 1 enable
 shutdown
 no log-link-change
 exit
!
interface loopback0
 description lo R3
 vrf forwarding v1
 ipv4 address 20.20.20.3 255.255.255.255
 ipv6 address 2020::3 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet1
 description R3@eth1 --&gt; R2@eth2
 vrf forwarding v1
 ipv4 address 6.6.6.2 255.255.255.252
 ipv6 address 6666::2 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet2
 description R3@eth2 --&gt; R4@eth2
 vrf forwarding v1
 ipv4 address 3.3.3.1 255.255.255.252
 ipv6 address 3333::1 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
server telnet tel
 security protocol telnet
 exec timeout 10000000
 exec logging
 exec colorize prompt
 no exec authorization
 no login authentication
 login logging
 vrf v1
 exit
!
end
</code></pre></div>
<p><code>r4-hw.txt</code></p>
<div class="highlight"><pre><span></span><code>int eth1 eth 0000.4444.0001 127.0.0.1 16021 127.0.0.1 16011
int eth2 eth 0000.4444.0003 127.0.0.1 46013 127.0.0.1 46023
tcp2vrf 2424 v1 23
</code></pre></div>
<p><code>r4-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>hostname R4
!
vrf definition v1
 rd 1:1
 exit
!
router lsrp4 1
 vrf v1
 router-id 10.4.4.4
 segrout 20 4
 redistribute connected
 exit
!
router lsrp6 1
 vrf v1
 router-id 10.6.4.4
 segrout 20 4
 redistribute connected
 exit
!
interface template1
 no description
 lldp enable
 vrf forwarding v1
 ipv4 address dynamic dynamic
 polka enable 4 65536 20
 mpls enable
 router lsrp4 1 enable
 shutdown
 no log-link-change
 exit
!
interface loopback0
 description lo R4
 vrf forwarding v1
 ipv4 address 20.20.20.4 255.255.255.255
 ipv6 address 2020::4 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet1
 description R4@eth1 --&gt; R1@eth1
 vrf forwarding v1
 ipv4 address 1.1.1.2 255.255.255.252
 ipv6 address 1111:1::2 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet2
 description R4@eth2 --&gt; R3@eth2
 vrf forwarding v1
 ipv4 address 3.3.3.2 255.255.255.252
 ipv6 address 3333::2 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
server telnet tel
 security protocol telnet
 exec timeout 10000000
 exec logging
 exec colorize prompt
 no exec authorization
 no login authentication
 login logging
 vrf v1
 exit
!
end
</code></pre></div>
<h4 id="221-edge-nodes-routers-r5-r6">2.2.1  <strong>Edge-Nodes-Routers</strong> <code>r5</code>, <code>r6</code><a class="headerlink" href="#221-edge-nodes-routers-r5-r6" title="Permanent link">&para;</a></h4>
<p><code>r5-hw.txt</code></p>
<div class="highlight"><pre><span></span><code>int eth1 eth 0000.1111.0001 127.0.0.1 16025 127.0.0.1 16015
tcp2vrf 2525 v1 23
</code></pre></div>
<p><code>r5-sw.txt</code></p>
<p><div class="highlight"><pre><span></span><code>hostname R5
!
vrf definition v1
 rd 1:1
 exit
!
router lsrp4 1
 vrf v1
 router-id 10.11.11.11
 segrout 20 11
 redistribute connected
 exit
!
router lsrp6 1
 vrf v1
 router-id 10.6.11.11
 segrout 20 11
 redistribute connected
 exit
!
interface template1
 no description
 lldp enable
 vrf forwarding v1
 ipv4 address dynamic dynamic
 polka enable 11 65536 20
 mpls enable
 router lsrp4 1 enable
 shutdown
 no log-link-change
 exit
!
interface loopback0
 description lo R5
 vrf forwarding v1
 ipv4 address 20.20.20.11 255.255.255.255
 ipv6 address 2020::11 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet1
 description R5@eth1 --&gt; R1@eth3
 vrf forwarding v1
 ipv4 address 11.11.11.1 255.255.255.252
 ipv6 address 1111::1 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface tunnel1
 description POLKA tunnel shortest ipv4 from R5 -&gt; R6
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 20.20.20.7
 tunnel domain-name 20.20.20.1 20.20.20.2
 tunnel mode polka
 vrf forwarding v1
 ipv4 address 30.30.30.1 255.255.255.252
 no shutdown
 no log-link-change
 exit
!
interface tunnel2
 description POLKA tunnel longuest ipv4 from R5 -&gt; R6
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 20.20.20.7
 tunnel domain-name 20.20.20.1 20.20.20.4 20.20.20.3 20.20.20.2
 tunnel mode polka
 vrf forwarding v1
 ipv4 address 40.40.40.1 255.255.255.252
 no shutdown
 no log-link-change
 exit
!
interface tunnel3
 description POLKA tunnel shortest ipv6 from R5 -&gt; R6
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 2020::7
 tunnel domain-name 2020::1 2020::2
 tunnel mode polka
 vrf forwarding v1
 ipv6 address 3030::1 ffff:ffff:ffff:ffff::
 no shutdown
 no log-link-change
 exit
!
interface tunnel4
 description POLKA tunnel longues ipv6 from R5 -&gt; R6
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 2020::7
 tunnel domain-name 2020::1 2020::4 2020::3 2020::2
 tunnel mode polka
 vrf forwarding v1
 ipv6 address 4040::1 ffff:ffff:ffff:ffff::
 no shutdown
 no log-link-change
 exit
!
!
server telnet tel
 security protocol telnet
 exec timeout 10000000
 exec colorize prompt
 exec logging
 no exec authorization
 no login authentication
 login logging
 vrf v1
 exit
!
end
</code></pre></div>
<code>r6-hw.txt</code></p>
<div class="highlight"><pre><span></span><code>int eth1 eth 0000.1717.0001 127.0.0.1 26021 127.0.0.1 26011
tcp2vrf 2626 v1 23
</code></pre></div>
<p><code>r6-sw.txt</code></p>
<div class="highlight"><pre><span></span><code>hostname R6
!
vrf definition v1
 rd 1:1
 exit
!
router lsrp4 1
 vrf v1
 router-id 10.7.7.7
 segrout 20 7
 redistribute connected
 exit
!
router lsrp6 1
 vrf v1
 router-id 10.6.7.7
 segrout 20 7
 redistribute connected
 exit
!
interface template1
 no description
 lldp enable
 vrf forwarding v1
 ipv4 address dynamic dynamic
 polka enable 7 65536 20
 mpls enable
 router lsrp4 1 enable
 shutdown
 no log-link-change
 exit
!
interface loopback0
 description lo R6
 vrf forwarding v1
 ipv4 address 20.20.20.7 255.255.255.255
 ipv6 address 2020::7 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface ethernet1
 description R6@eth1 -&gt; R2@eth1
 vrf forwarding v1
 ipv4 address 7.7.7.1 255.255.255.252
 ipv6 address 7777::1 ffff:ffff:ffff:ffff::
 template template1
 router lsrp6 1 enable
 no shutdown
 exit
!
interface tunnel1
 description POLKA tunnel from R6 -&gt; R5
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 20.20.20.11
 tunnel domain-name 20.20.20.2 20.20.20.1
 tunnel mode polka
 vrf forwarding v1
 ipv4 address 30.30.30.2 255.255.255.252
 no shutdown
 no log-link-change
 exit
!
interface tunnel2
 description POLKA tunnel longuest ipv4 from R6 -&gt; R5
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 20.20.20.11
 tunnel domain-name 20.20.20.2 20.20.20.3 20.20.20.4 20.20.20.1
 tunnel mode polka
 vrf forwarding v1
 ipv4 address 40.40.40.2 255.255.255.252
 no shutdown
 no log-link-change
 exit
!
interface tunnel3
 description POLKA tunnel shortest ipv6 from R6 -&gt; R5
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 2020::11
 tunnel domain-name 2020::2 2020::1
 tunnel mode polka
 vrf forwarding v1
 ipv6 address 3030::2 ffff:ffff:ffff:ffff::
 no shutdown
 no log-link-change
 exit
!
interface tunnel4
 description POLKA tunnel longues ipv6 from R6 -&gt; R5
 tunnel vrf v1
 tunnel source loopback0
 tunnel destination 2020::11
 tunnel domain-name 2020::2 2020::3 2020::4 2020::1
 tunnel mode polka
 vrf forwarding v1
 ipv6 address 4040::2 ffff:ffff:ffff:ffff::
 no shutdown
 no log-link-change
 exit
!
server telnet tel
 security protocol telnet
 exec timeout 10000000
 exec logging
 exec colorize prompt
 no exec authorization
 no login authentication
 login logging
 vrf v1
 exit
!
end
</code></pre></div>
<h2 id="3-verification">3 Verification<a class="headerlink" href="#3-verification" title="Permanent link">&para;</a></h2>
<h3 id="31-launch-all-nodes">3.1 Launch all nodes<a class="headerlink" href="#31-launch-all-nodes" title="Permanent link">&para;</a></h3>
<p>Run <code>r1</code>, <code>r2</code>, <code>r3</code>,<code>r4</code>, <code>r5</code>, <code>r6</code> in different terminal windows:</p>
<ul>
<li>
<p><strong>Run</strong> <code>r1</code>
<code>java -jar rtr.jar routersc r1-hw.txt r1-sw.txt</code></p>
</li>
<li>
<p><strong>Run</strong> <code>r2</code>
<code>java -jar rtr.jar routersc r2-hw.txt r2-sw.txt</code></p>
</li>
<li>
<p><strong>Run</strong> <code>r3</code>
<code>java -jar rtr.jar routersc r3-hw.txt r3-sw.txt</code></p>
</li>
<li>
<p><strong>Run</strong> <code>r4</code>
<code>java -jar rtr.jar routersc r4-hw.txt r4-sw.txt</code></p>
</li>
<li>
<p><strong>Run</strong> <code>r5</code>
<code>java -jar rtr.jar routersc r5-hw.txt r5-sw.txt</code></p>
</li>
<li>
<p><strong>Run</strong> <code>r6</code>
<code>java -jar rtr.jar routersc r6-hw.txt r6-sw.txt</code></p>
</li>
</ul>
<h3 id="or">Or<a class="headerlink" href="#or" title="Permanent link">&para;</a></h3>
<p>Use <code>tmux</code> to run the entire topology in a single window.
To install it on a Linux Debian-based like Ubuntu, use <code>apt install -y tmux</code>.</p>
<p>Create a file
<code>vi start.sh</code>
<div class="highlight"><pre><span></span><code>#!/bin/bash

# Copyright [2019-2022] Universidade Federal do Espirito Santo
#                       Instituto Federal do Espirito Santo
#
# Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

RTR=/&lt;path freertr&gt;/rtr.jar
HWSW=/&lt;path configuration files&gt;/

tmux new-session -d -s rare &#39;java -jar &#39;$RTR&#39; routersc &#39;$HWSW&#39;r1-hw.txt &#39;$HWSW&#39;r1-sw.txt&#39;
tmux split-window -v -t 0 -p 50
tmux send &#39;java -jar &#39;$RTR&#39; routersc &#39;$HWSW&#39;r2-hw.txt &#39;$HWSW&#39;r2-sw.txt&#39; ENTER;
tmux split-window -h -t 0 -p 50
tmux send &#39;java -jar &#39;$RTR&#39; routersc &#39;$HWSW&#39;r3-hw.txt &#39;$HWSW&#39;r3-sw.txt&#39; ENTER;
tmux split-window -h -t 2 -p 50
tmux send &#39;java -jar &#39;$RTR&#39; routersc &#39;$HWSW&#39;r4-hw.txt &#39;$HWSW&#39;r4-sw.txt&#39; ENTER;
tmux split-window -v -t 0 -p 50
tmux send &#39;java -jar &#39;$RTR&#39; routersc &#39;$HWSW&#39;r5-hw.txt &#39;$HWSW&#39;r5-sw.txt&#39; ENTER;
tmux split-window -v -t 2 -p 50
tmux send &#39;java -jar &#39;$RTR&#39; routersc &#39;$HWSW&#39;r6-hw.txt &#39;$HWSW&#39;r6-sw.txt&#39; ENTER;
tmux select-layout tiled
tmux a;
</code></pre></div></p>
<h3 id="32-access-by-telnet">3.2 Access by Telnet<a class="headerlink" href="#32-access-by-telnet" title="Permanent link">&para;</a></h3>
<p>To access routers by telnet use <code>telnet &lt;ip address&gt; &lt;port&gt;</code>.</p>
<p>For Example:</p>
<p><code>telnet 127.0.0.1 2525</code></p>
<h3 id="33-verifying-the-tunnel-is-working-on-router-r5">3.3 Verifying the tunnel is working on router r5<a class="headerlink" href="#33-verifying-the-tunnel-is-working-on-router-r5" title="Permanent link">&para;</a></h3>
<p><code>R5# Show interfaces summary</code></p>
<p><div class="highlight"><pre><span></span><code>interface  state  tx     rx     drop
template1  admin  50     0      345
loopback0  up     3273   0      0
ethernet1  up     17231  32368  0
ethernet2  up     5760   0      0
tunnel1    up     330    0      0
tunnel2    up     0      0      0
tunnel3    up     460    0      0
tunnel4    up     230    0      0
</code></pre></div>
If all tunnels are <code>up</code>, it's a good signal.</p>
<p>For verification on router <code>R6</code>, just connect and set the commands above.</p>
<h3 id="33-testing-connectivity-between-r5-to-r6-using-polka">3.3 Testing connectivity between <code>R5</code> to <code>R6</code> using PolKA<a class="headerlink" href="#33-testing-connectivity-between-r5-to-r6-using-polka" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Shortest Path tunnel1 ipv4</strong></li>
</ul>
<p><code>R5#ping 30.30.30.2 vrf v1</code>
<div class="highlight"><pre><span></span><code>pinging 30.30.30.2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, sgt=0, flow=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/sum=0/0/3/8, ttl min/avg/max=255/255/255, tos min/avg/max=0/0/0
</code></pre></div>
<img alt="Shortest Path" src="/img/upload_fc7ec37244d45d0fc56cf6e5477a1a47.png" /></p>
<ul>
<li><strong>Longest Path tunnel2 ipv4</strong></li>
</ul>
<p><code>R5#ping 40.40.40.2 vrf v1</code>
<div class="highlight"><pre><span></span><code>pinging 40.40.40.2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, sgt=0, flow=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/sum=3/4/6/23, ttl min/avg/max=255/255/255, tos min/avg/max=0/0/0
</code></pre></div>
<img alt="Longuest Path" src="/img/upload_964c33bf6e483c09d210eab98bcc59cc.png" /></p>
<ul>
<li><strong>Shortest Path tunnel3 ipv6</strong></li>
</ul>
<p><code>R5#ping 3030::2 vrf v1</code>
<div class="highlight"><pre><span></span><code>pinging 3030::2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, sgt=0, flow=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/sum=0/0/1/2, ttl min/avg/max=255/255/255, tos min/avg/max=0/0/0
</code></pre></div>
<img alt="Shortest Path" src="/img/upload_6eb53de9dc87aa3f4143a4183903573b.png" /></p>
<ul>
<li><strong>Longest Path tunnel4 ipv6</strong></li>
</ul>
<p><code>R5#ping 4040::2 vrf v1</code></p>
<p><div class="highlight"><pre><span></span><code>pinging 4040::2, src=null, vrf=v1, cnt=5, len=64, tim=1000, gap=0, ttl=255, tos=0, sgt=0, flow=0, fill=0, sweep=false, multi=false, detail=false
!!!!!
result=100%, recv/sent/lost/err=5/5/0/0, rtt min/avg/max/sum=0/0/0/2, ttl min/avg/max=255/255/255, tos min/avg/max=0/0/0
</code></pre></div>
<img alt="Longuest Path" src="/img/upload_c82ee2d30c8907e0ec60648e89cc10d0.png" /></p>
<h3 id="34-visualizing-route-table">3.4 Visualizing route table<a class="headerlink" href="#34-visualizing-route-table" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Route table ipv4</strong></li>
</ul>
<p><code>R5#show ipv4 route v1</code></p>
<div class="highlight"><pre><span></span><code>typ  prefix          metric  iface      hop         time
C    0.0.0.0/32      0/0     ethernet2  null        00:15:39
L    1.1.1.0/30      70/10   ethernet1  11.11.11.2  00:15:29
L    2.2.2.0/30      70/10   ethernet1  11.11.11.2  00:15:29
L    3.3.3.0/30      70/20   ethernet1  11.11.11.2  00:15:29
L    6.6.6.0/30      70/20   ethernet1  11.11.11.2  00:15:29
L    7.7.7.0/30      70/20   ethernet1  11.11.11.2  00:15:29
C    11.11.11.0/30   0/0     ethernet1  null        00:15:40
LOC  11.11.11.1/32   0/1     ethernet1  null        00:15:40
L    20.20.20.1/32   70/10   ethernet1  11.11.11.2  00:15:29
L    20.20.20.2/32   70/20   ethernet1  11.11.11.2  00:15:29
L    20.20.20.3/32   70/30   ethernet1  11.11.11.2  00:15:29
L    20.20.20.4/32   70/20   ethernet1  11.11.11.2  00:15:29
L    20.20.20.7/32   70/30   ethernet1  11.11.11.2  00:15:29
C    20.20.20.11/32  0/0     loopback0  null        00:15:42
C    30.30.30.0/30   0/0     tunnel1    null        00:15:29
LOC  30.30.30.1/32   0/1     tunnel1    null        00:15:29
C    40.40.40.0/30   0/0     tunnel2    null        00:15:29
LOC  40.40.40.1/32   0/1     tunnel2    null        00:15:29
</code></pre></div>
<ul>
<li><strong>Route table ipv6</strong></li>
</ul>
<p><code>R5#show ipv6 route v1</code></p>
<div class="highlight"><pre><span></span><code>typ  prefix        metric  iface      hop      time
C    1111::/64     0/0     ethernet1  null     00:18:17
LOC  1111::1/128   0/1     ethernet1  null     00:18:17
L    1111:1::/64   70/10   ethernet1  1111::2  00:18:05
L    2020::1/128   70/10   ethernet1  1111::2  00:18:05
L    2020::2/128   70/20   ethernet1  1111::2  00:18:05
L    2020::3/128   70/30   ethernet1  1111::2  00:18:05
L    2020::4/128   70/20   ethernet1  1111::2  00:18:05
L    2020::7/128   70/30   ethernet1  1111::2  00:18:05
C    2020::11/128  0/0     loopback0  null     00:18:19
L    2222::/64     70/10   ethernet1  1111::2  00:18:05
C    3030::/64     0/0     tunnel3    null     00:18:01
LOC  3030::1/128   0/1     tunnel3    null     00:18:01
L    3333::/64     70/20   ethernet1  1111::2  00:18:05
C    4040::/64     0/0     tunnel4    null     00:18:01
LOC  4040::1/128   0/1     tunnel4    null     00:18:01
L    6666::/64     70/20   ethernet1  1111::2  00:18:05
L    7777::/64     70/20   ethernet1  1111::2  00:18:05
</code></pre></div>
<h3 id="34-visualizing-polka-routeid">3.4 Visualizing PolKA routeid<a class="headerlink" href="#34-visualizing-polka-routeid" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Routeid Tunnel 1</strong></li>
</ul>
<p><code>R5#show polka routeid tunnel1</code></p>
<div class="highlight"><pre><span></span><code>mode  routeid
hex   00 00 00 00 00 00 00 00 00 00 1c 59 b8 b1 a4 ea
poly  111000101100110111000101100011010010011101010
</code></pre></div>
<ul>
<li><strong>Routeid Tunnel 2</strong></li>
</ul>
<p><code>R5#show polka routeid tunnel2</code></p>
<div class="highlight"><pre><span></span><code>mode  routeid
hex   00 00 00 00 00 00 41 3b fd 39 6d 38 a0 07 71 39
poly  1000001001110111111110100111001011011010011100010100000000001110111000100111001
</code></pre></div>
<h3 id="35-tested-on">3.5 Tested on<a class="headerlink" href="#35-tested-on" title="Permanent link">&para;</a></h3>
<p>These configurations have been tested on the following operating systems: MacOS Monterey 12.2 and Ubuntu 21.04</p>
<h2 id="4-conclusion">4 Conclusion<a class="headerlink" href="#4-conclusion" title="Permanent link">&para;</a></h2>
<p>This section demonstrated:</p>
<ul>
<li>How to launch many automated routers with bash script using tmux</li>
<li>How to use a template interface on freertr</li>
<li>How to enable PolKA in a square topology</li>
<li>How to create PolKA tunnels</li>
<li>How to verify connectivity</li>
</ul>
<p>You learned how to enable PolKA protocol using FreeRouter tunnels. You also learned how to use Link-state Routing Protocol (LSRP).</p>
<h2 id="5-references">5 References:<a class="headerlink" href="#5-references" title="Permanent link">&para;</a></h2>
<p><a href="https://ieeexplore.ieee.org/document/9165501">https://ieeexplore.ieee.org/document/9165501</a></p>
<p><a href="https://github.com/nerds-ufes/polka">https://github.com/nerds-ufes/polka</a></p>
<p><a href="http://www.freertr.org/">http://www.freertr.org/</a></p>
<p><a href="https://github.com/eversonscherrer/freertr/tree/main/polKa">https://github.com/eversonscherrer/freertr/tree/main/polKa</a></p>
<p><a href="https://github.com/eversonscherrer/dissector-polka">https://github.com/eversonscherrer/dissector-polka</a></p>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
 Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
    
    <div class="md-copyright__highlight">
        <img src="/img/geant_logo_white.png"> <img src="/img/eu_logo.png"/><br> <a href="#__consent">Change cookie settings</a>

    </div>
    
    
    Made with
    <span class="twemoji heart">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 20.408c-.492.308-.903.546-1.192.709-.153.086-.308.17-.463.252h-.002a.75.75 0 0 1-.686 0 16.709 16.709 0 0 1-.465-.252 31.147 31.147 0 0 1-4.803-3.34C3.8 15.572 1 12.331 1 8.513 1 5.052 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262A31.146 31.146 0 0 1 14 20.408Z"/></svg>
    </span> by
    <a href="https://github.com/orgs/rare-freertr/people" target="_blank" rel="noopener">
        RARE contributors</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a>
    
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie Consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b425cdc4.min.js"></script>
      
    
  </body>
</html>